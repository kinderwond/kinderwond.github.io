<!doctype html>
<html lang="uk">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è –Ω–∞ –ø–æ–±–∞—á–µ–Ω–Ω—è</title>
  <style>
    :root{
      --bg1:#f0f4ff;
      --bg2:#e5ecff;
      --fg:#1b1b1f;
      --muted:#6b6b6b;
      --yes:#0059d1;
      --no:#d12c4a;
      --card:#ffffffcc;
      --shadow: 0 10px 30px rgba(0,0,0,.07);
      --radius: 16px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: -apple-system,BlinkMacSystemFont,"SF Pro Text","SF Pro Display",Inter,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--fg);
      background: radial-gradient(1200px 800px at 80% -10%, var(--bg2), transparent 60%),
                  radial-gradient(1200px 800px at -10% 110%, var(--bg1), transparent 60%),
                  #fff;
    }
    .wrap{
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:24px 16px calc(24px + env(safe-area-inset-bottom));
    }
    .card{
      width:100%;
      max-width:480px;
      background:var(--card);
      backdrop-filter: blur(6px);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      padding:20px 18px 16px;
    }
    .badge{
      display:inline-block;
      font-size:12px;
      text-transform:uppercase;
      background:#cce0ff;
      color:#003366;
      padding:6px 10px;
      border-radius:999px;
      margin-bottom:10px;
    }
    h1{ font-size:26px; margin:6px 0 10px }
    p{ font-size:16px; line-height:1.5 }
    .actions{
      display:flex; gap:12px; margin-top:12px;
    }
    button{
      flex:1; font-size:18px; font-weight:600;
      padding:14px 16px;
      border-radius:12px; border:0; cursor:pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
    }
    .yes{ background: var(--yes); color:#fff }
    .no{ background: var(--no); color:#fff }
    .note{ margin-top:10px; font-size:13px; color:var(--muted); text-align:center }
    canvas.burst{position:fixed;inset:0;pointer-events:none;z-index:10}
  </style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <span class="badge">–ó–∞–ø—Ä–æ—à–µ–Ω–Ω—è</span>
    <h1>–û –ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞ —Ç–∞ –Ω–µ–ø–æ–≤—Ç–æ—Ä–Ω–∞ –ù—ñ–∫–∞ ü§ñ</h1>
    <p>–ú–∞—é —Å–º—ñ–ª–∏–≤—ñ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ –≤–∞—Å –Ω–∞ –∑—É—Å—Ç—Ä—ñ—á –Ω–∞ —Ü–∏—Ö –≤–∏—Ö—ñ–¥–Ω–∏—Ö –∑–∞–¥–ª—è –ø—ñ–¥–≤–∏—â–µ–Ω–Ω—è –≤–∞—à–æ–≥–æ –≥–æ—Ä–º–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ñ–æ–Ω—É —Ç–∞ –∑–∞–¥–æ–≤–æ–ª–µ–Ω–Ω—è –æ—Ä–≥–∞–∑–º–∞–º–∏ –≤–∞—à—ñ —Å–º–∞–∫–æ–≤—ñ —Ä–µ—Ü–µ–ø—Ç–æ—Ä–∏
      —è–∫–∏–º—Å—å –ª—é–¥—å—Å—å–∫–∏–º –¥–µ—Å–µ—Ä—Ç–æ–º
    </p>
    <div class="actions">
      <button class="yes" id="yesBtn">–ó–∞ –¥–µ—Ç–∞–ª—è–º–∏ –≤ –æ—Å–æ–±–∏—Å—Ç—ñ</button>
      <button class="no" id="noBtn">–ù–µ –ª—é–±–ª—é –¥–µ—Å–µ—Ä—Ç–∏</button>
    </div>
    <div class="note" id="status"></div>
  </div>
</div>
<canvas class="burst" id="burst"></canvas>

<script>
  const ENDPOINT = "http://178.212.195.26:3000/invite"; 

  const statusEl = document.getElementById('status');
  const yesBtn = document.getElementById('yesBtn');
  const noBtn = document.getElementById('noBtn');

  function payload(answer){
    return {
      answer,
    };
  }

  async function send(answer){
    statusEl.textContent = "–ù–∞–¥—Å–∏–ª–∞—é...";
    try{
      await fetch(ENDPOINT,{
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify(payload(answer))
      });
      statusEl.textContent = answer==="yes"?"–Æ—Ö—É! –í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äú—Ç–∞–∫‚Äù –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ ü§ñ":"–®–∫–æ–¥–∞ üòî –í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äú–Ω—ñ‚Äù –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ";
      if(answer==="yes") burstAI();
    }catch(e){
      statusEl.textContent = "–ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–∫–∏";
    }
  }

  yesBtn.onclick=()=>send(true);
  noBtn.onclick=()=>send(false);

  function burstAI(){
    const c = document.getElementById('burst');
    const ctx = c.getContext('2d');
    c.width=window.innerWidth; c.height=window.innerHeight;
    const icons = ["ü§ñ","üß†","üí°","‚ö°Ô∏è","üì°","üîÆ"];
    const parts = Array.from({length:24},()=>({
      x:Math.random()*c.width,
      y:c.height+20,
      vy:-2-Math.random()*2,
      vx:(Math.random()-.5)*1.5,
      emo:icons[(Math.random()*icons.length)|0],
      life:60+Math.random()*30
    }));
    ctx.font="22px sans-serif";
    function step(){
      ctx.clearRect(0,0,c.width,c.height);
      parts.forEach(p=>{
        p.x+=p.vx; p.y+=p.vy; p.life--;
        ctx.globalAlpha=Math.max(0,p.life/80);
        ctx.fillText(p.emo,p.x,p.y);
      });
      if(parts.some(p=>p.life>0)) requestAnimationFrame(step);
    }
    step();
  }
</script>
</body>
</html>
